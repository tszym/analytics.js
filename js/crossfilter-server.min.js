!function(a){function b(a){function b(){for(var a in m)delete m[a]}function c(a){return"undefined"!=typeof l[a]?l[a]:j[a].members}function d(b,d,e){if(b=void 0===b||null===b?"_all":b,d=void 0===d?!0:d,e=void 0===e?[a.measures[0]]:e,datasetKey=e.sort().join(","),"undefined"==typeof m[b]||"undefined"==typeof m[b][datasetKey]){h.clear(),h.drill(a.cube);for(var f in e)h.push(e[f]);for(var g in j)g==b?h.slice(j[g].hierarchy,j[b].members):h.slice(j[g].hierarchy,c(g));"_all"!=b&&d&&h.dice([j[b].hierarchy]);var i=h.execute().map(function(a){var c={key:a[b]};if(1==e.length)c.value=a[e[0]];else{c.value={};for(var d in e)c.value[e[d]]=a[e[d]]}return c}).sort(function(a,b){return a.key>b.key?1:-1});"undefined"==typeof m[b]&&(m[b]={}),m[b][datasetKey]=i}return m[b][datasetKey]}function e(){out=1;for(var a in j)out*=j[a].members.length;return out}function f(){var a={reduce:function(){return a},reduceCount:function(){return a},reduceSum:function(){return a},dispose:function(){},value:function(){return d(null,!1)[0].value}};return a}function g(a){function c(){var b={};return Object.keys(j).forEach(function(a){b[a]=a}),a(b)}function e(a){return null===a?k():Array.isArray(a)?g(a):"function"==typeof a?h(a):f(a)}function f(a){return b(),h(function(b){return b==a})}function g(a){return b(),h(function(b){return b>=a[0]&&b<=a[1]})}function h(a){for(b(),l[s]=[],i=0;i<v.length;i++)a(v[i])&&l[s].push(v[i]);return w}function k(){return b(),l[s]=v,w}function n(){throw"Not implemented yet"}function o(){throw"Not implemented yet"}function p(){var a={reduce:function(){return a},reduceCount:function(){return a},reduceSum:function(){return a},dispose:function(){},value:function(){return d(s,!1)[0].value}};return a}function q(){delete l[s],delete m[s]}function r(){function a(){null===n&&(n=function(a){return a});for(var a=[],c=b(),d=0;d<c.length;d++)a[d]=c[d];return a.sort(function(a,b){return n(a.value)>n(b.value)?-1:1}),a}function b(){return l.length>0?d(s,!0,l):d(s,!0)}function c(b){return a().slice(0,b)}function e(a,b,c){return l=Object.keys(c()),m}function f(){return m}function g(){return m}function h(a){return n=a,m}function i(){return n=null,m}function j(){return v.length}function k(){}var l=[],m={top:c,all:b,reduce:e,reduceCount:f,reduceSum:g,order:h,orderNatural:i,size:j,dispose:k},n=null;return m}var s=c(),t=j[s].hierarchy,u=j[s].level,v=j[s].members;if("string"!=typeof s||"string"!=typeof t||"number"!=typeof u||!Array.isArray(v)||v.length<=0)throw"Dimension do not exist or malformed in declared metadata";var w={filter:e,filterExact:f,filterRange:g,filterFunction:h,filterAll:k,top:n,bottom:o,group:r,groupAll:p,dispose:q};return w}var h=a.api,j=a.dimensions;if("object"!=typeof h||"string"!=typeof a.schema||"string"!=typeof a.cube||"object"!=typeof a.measures||"object"!=typeof j||Object.keys(j).length<1)throw"Metadata are malformed";var k={dimension:g,groupAll:f,size:e},l={},m={};return k}a.crossfilterServer=b}("undefined"!=typeof exports&&exports||this);
//# sourceMappingURL=crossfilter-server.min.js.map